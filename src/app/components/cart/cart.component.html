<div class="cart">
  <h3 class="mt-5">Carrinho</h3>
  <div *ngIf="(cartItems$ | async)?.length === 0" class="empty-cart">
    <p>Seu carrinho est√° vazio</p>
  </div>
  <div
    *ngFor="let item of cartItems$ | async"
    class="cart-item d-flex align-items-center mb-3 p-3 border rounded"
  >
    <img
      [src]="item.img"
      [alt]="item.name"
      class="cart-item-img me-3"
      style="width: 60px; height: 60px; object-fit: cover"
    />
    <div class="flex-grow-1">
      <h5 class="mb-1">{{ item.name }}</h5>
      <p class="mb-1 text-muted">{{ item.category }}</p>
      <p class="mb-0 fw-bold">R$ {{ item.price.toFixed(2) }}</p>
    </div>
    <div class="quantity-controls d-flex align-items-center me-3">
      <button
        class="btn btn-sm btn-outline-secondary"
        (click)="updateQuantity(item.id, item.quantity - 1)"
      >
        -
      </button>
      <span class="mx-2">{{ item.quantity }}</span>
      <button
        class="btn btn-sm btn-outline-secondary"
        (click)="updateQuantity(item.id, item.quantity + 1)"
      >
        +
      </button>
    </div>
    <button class="btn btn-sm btn-danger" (click)="removeItem(item.id)">
      <i class="bi bi-trash"></i>
    </button>
  </div>
  <div
    *ngIf="(cartItems$ | async)?.length! > 0"
    class="cart-total mt-3 p-3 bg-light rounded"
  >
    <h4>Total: R$ {{ getTotal().toFixed(2) }}</h4>
    <div class="d-flex gap-2">
      <button class="btn btn-success flex-grow-1">Finalizar Pedido</button>
      <button class="btn btn-outline-danger" (click)="clearCart()">
        Limpar
      </button>
    </div>
  </div>
</div>
